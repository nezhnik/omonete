# Резервная копия БД монет

## Что никуда не переносится и не удаляется

- **Ваша БД монет** (MySQL) — остаётся единственным источником каталога. Подключение в `lib/db.ts`, переменная `DATABASE_URL`.
- **Экспорт в JSON** — скрипт `scripts/export-coins-to-json.js` по-прежнему читает из MySQL и пишет в `public/data/` (coins.json, coin-ids.json, coins/*.json).
- **Картинки монет** — в `public/image/coins/`, скрипты загрузки и т.д. не трогаются.

**Supabase** используется только для:
- входа/регистрации пользователей (Auth);
- таблицы `user_collection` (кто какую монету добавил в портфолио).

Данные о самих монетах в Supabase не хранятся и не дублируются.

## Отдельное место для копии данных

Резервная копия экспорта монет (JSON) складывается в папку **`backup-coins-data/`** в корне проекта. Она в `.gitignore`, чтобы не коммитить тысячи файлов; при необходимости папку можно убрать из `.gitignore` и один раз закоммитить снимок.

### Как сделать бэкап

```bash
npm run backup:coins
```

Скрипт копирует в `backup-coins-data/`:
- `public/data/coins.json`
- `public/data/coin-ids.json` (если есть)
- все файлы из `public/data/coins/*.json`

Каждый запуск перезаписывает содержимое `backup-coins-data/` текущим состоянием экспорта. Для снимков по датам можно вручную переименовать папку, например: `backup-coins-data-2026-02-17`.

### Бэкап самой MySQL (по желанию)

Если нужно сохранить саму базу MySQL (не только экспорт в JSON):

```bash
mysqldump -h HOST -u USER -p DATABASE > backup-mysql-$(date +%Y-%m-%d).sql
```

Параметры взять из `DATABASE_URL` в `.env`.
